# ============================================
# APARTMENT MANAGEMENT SYSTEM
# Production Environment Variables Template
# ============================================
# INSTRUCTIONS:
# 1. Copy this file to .env: cp .env.example .env
# 2. Replace all placeholder values with your actual values
# 3. NEVER commit .env file to git!
# ============================================

# ============================================
# Port Configuration
# ============================================
FRONTEND_PORT=80
BACKEND_PORT=8080
MYSQL_PORT=3307

# ============================================
# Database Configuration
# ============================================
# SECURITY: Change these credentials in production!
MYSQL_ROOT_PASSWORD=CHANGE_ME_STRONG_ROOT_PASSWORD
MYSQL_DATABASE=apartment_db
MYSQL_USER=apartment
MYSQL_PASSWORD=CHANGE_ME_STRONG_DB_PASSWORD

# ============================================
# Spring Boot Configuration
# ============================================
SPRING_PROFILES_ACTIVE=prod
JPA_DDL_AUTO=validate  # CRITICAL: NEVER use 'update' in production!
JPA_SHOW_SQL=false

# ============================================
# JWT Security Configuration
# ============================================
# CRITICAL SECURITY: JWT_SECRET must be base64-encoded!
# The backend code uses Decoders.BASE64.decode() to read this value.
# 
# To generate a secure base64 JWT secret (PowerShell):
#   $bytes = New-Object byte[] 64
#   [System.Security.Cryptography.RandomNumberGenerator]::Create().GetBytes($bytes)
#   [Convert]::ToBase64String($bytes)
#
# To generate a secure base64 JWT secret (Linux/Mac):
#   openssl rand -base64 64
#
# PRODUCTION: Generate a NEW random secret - DO NOT use any default!
# Minimum 64 bytes recommended for HS512 algorithm
# ============================================
JWT_SECRET=CHANGE_ME_BASE64_ENCODED_JWT_SECRET_64_CHARS_OR_MORE
JWT_EXPIRATION=86400000  # 24 hours in milliseconds

# ============================================
# CORS Configuration
# ============================================
# PRODUCTION: Set to your actual domain(s) - comma-separated
# Example: https://yourdomain.com,https://www.yourdomain.com
# CRITICAL: NEVER use "*" in production!
# ============================================
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:80

# ============================================
# File Upload Configuration
# ============================================
FILE_UPLOAD_DIR=/app/uploads/payment-slips
MAINTENANCE_UPLOAD_DIR=/app/uploads/maintenance-attachments

# ============================================
# Default System Users Configuration
# ============================================
# These users are created automatically on first application startup
# SECURITY: Change ALL credentials before production deployment!
# ============================================

# --- Admin User (Full System Access) ---
# Role: ADMIN - Complete control over the system
ADMIN_USERNAME=CHANGE_ME_admin_username
ADMIN_PASSWORD=CHANGE_ME_Strong_Admin_P@ssw0rd!
ADMIN_EMAIL=admin@yourdomain.com

# --- Villager User (Tenant/Resident) ---
# Role: VILLAGER - Can manage their own apartment/lease
VILLAGER_USERNAME=CHANGE_ME_resident_username
VILLAGER_PASSWORD=CHANGE_ME_Strong_Resident_P@ssw0rd!
VILLAGER_EMAIL=resident@yourdomain.com

# --- Test User (General User Role) ---
# Role: USER - Basic user for testing
TEST_USERNAME=CHANGE_ME_user_username
TEST_PASSWORD=CHANGE_ME_Strong_User_P@ssw0rd!
TEST_EMAIL=user@yourdomain.com

# ============================================
# Development-Only Variables (Optional)
# ============================================
# These are only used in docker-compose.dev.yml
JWT_SECRET_DEV=ZGV2and0c2VjcmV0a2V5bm90Zm9ycHJvZHVjdGlvbnVzZTEyMzQ1Njc4OTBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eg==

# ============================================
# Test-Only Variables (Optional)
# ============================================
# These are only used in test environments
JWT_SECRET_TEST=VGVzdFNlY3JldEtleUZvclVuaXRUZXN0c09ubHkxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTA=
JWT_EXPIRATION_TEST=3600000

# ============================================
# PRODUCTION DEPLOYMENT CHECKLIST
# ============================================
# Before deploying to production, verify:
# ✅ All passwords are strong, unique, and randomly generated
# ✅ JWT_SECRET is base64-encoded and at least 64 bytes (88+ chars after encoding)
# ✅ CORS_ALLOWED_ORIGINS contains ONLY your actual domain(s) - NO wildcards!
# ✅ JPA_DDL_AUTO is set to 'validate' (NEVER 'update', 'create', or 'create-drop')
# ✅ JPA_SHOW_SQL is set to 'false' to avoid logging sensitive data
# ✅ This .env file is listed in .gitignore
# ✅ No secrets are hardcoded anywhere in source code
# ✅ Database backups are configured and tested
# ✅ SSL/TLS certificates are properly configured
# ✅ Firewall rules are properly configured
# ============================================

